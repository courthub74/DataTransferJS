<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sender Page (URL Parameters)</title>

    <!-- CSS -->
     <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <h1>Data Transfer from</h1>

    <!-- Form -->
     <form id="dataform">

        <!-- Name Div -->
         <div class="name_inputs">

            <!-- First Initial -->
            <input type="text" id="firstInput" placeholder="Enter First Initial:" maxlength="1">

            <!-- Last Name -->
            <input type="text" id="lastInput" placeholder="Enter Last Name:">

         </div>

         <!-- Pin Number -->
        <input type="password" id="pinInput" placeholder="Enter Pin Number:" maxlength="4">

        <!-- Submit Button -->
         <button type="submit">Send Data</button>
     </form>

     <!-- <script src="../js/data_from.js"></script> -->
    <script>
        console.log("Transfer from this Page");


// Query the form
let dataForm = document.getElementById('dataform');

        // add submit event listener
        dataForm.addEventListener('submit', (e) => {
            // Test Print
            console.log("Submit Button Pressed");

            // prevent resetting page
            e.preventDefault();

            // Get input values

            // First Initial by value
            const first = document.getElementById('firstInput').value;

            // Last Name
            const last = document.getElementById('lastInput').value;

            // Pin Number
            const pin = document.getElementById('pinInput').value;

            // Encode parameters
            const encodedFirst = encodeURIComponent(first);
            const encodedLast = encodeURIComponent(last);
            const encodedPin = encodeURIComponent(pin);
            

            // Redirect with URL parameters
            window.location.href = `received.html?first=${encodedFirst}&last=${encodedLast}&pin=${encodedPin}`;
        });
    </script>
    
</body>
</html>