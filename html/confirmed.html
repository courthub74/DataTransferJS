<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmation</title>

    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <h1>Confirmation Page</h1>

    <!-- Confirmation Data to display -->
    <div id="confirm_data"></div>

    <h4>Is this information correct?</h4>

    <!-- Yes or No -->
    <div class="yes_no">
        <a href="#">Yes</a>
        <p>or</p>
        <a href="./index.html">No</a>
    </div>

    <script>
        console.log("Data to confirmation Page");

        // Get URL Parameters (it's a search)
        const urlParams = new URLSearchParams(window.location.search);

        // Retrieve and decode parameters (from Received.html page)

        // User Encoded
        const user_name = urlParams.get('user') ?
            decodeURIComponent(urlParams.get('user')) : 'N/A';

        // Pin Encoded
        const pin_number = urlParams.get('pin') ?
            decodeURIComponent(urlParams.get('pin')) : 'N/A';

        // Account type Encoded
        const acct_type = urlParams.get('account') ?
            decodeURIComponent(urlParams.get('account')) : 'Not retrieved';
        
        // Display retrieved data

        // first query the div to display the data in
        const confirm_display = document.getElementById('confirm_data');

        /**Grab the encoded parameters and 
         * set them to the inner HTML in the data display div*/
        confirm_display.innerHTML = `
            <p class="tites">You are now registered as:</p>
            <div class="creds">
                <p>${user_name}</p>
                <p>${acct_type}</p>
                <p>Pin: ${pin_number}</p>
            </div>`
        ;
    </script>
    
</body>
</html>